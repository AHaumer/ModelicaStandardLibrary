<HTML>
<HEAD>
<TITLE>Modelica.Fluid.Utilities</TITLE>
<META name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<META name="description" content="&quot;Utility models to construct fluid components (should not be used directly)&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal} 
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P></P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Utilities<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Utilities"></A><A HREF="Modelica_Fluid.html#Modelica.Fluid"
>Modelica.Fluid</A>.Utilities</H2>
<B>Utility models to construct fluid components (should not be used directly)</B>
<P></P>
<P></P><H3>Information</H3>
<PRE></pre>

<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons_UtilitiesPackage.html#Modelica.Icons.UtilitiesPackage"
>Modelica.Icons.UtilitiesPackage</A> (Icon for utility packages).
<P></P><H3>Package Content</H3>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.checkBoundary" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.checkBoundary"
>checkBoundary</A>
</TD><TD>Check whether boundary definition is correct</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.regRoot" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.regRoot"
>regRoot</A>
</TD><TD>Anti-symmetric square root approximation with finite derivative in the origin</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.regRoot_der" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.regRoot_der"
>regRoot_der</A>
</TD><TD>Derivative of regRoot</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.regSquare" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.regSquare"
>regSquare</A>
</TD><TD>Anti-symmetric square approximation with non-zero derivative in the origin</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.regPow" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.regPow"
>regPow</A>
</TD><TD>Anti-symmetric power approximation with non-zero derivative in the origin</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.regRoot2" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.regRoot2"
>regRoot2</A>
</TD><TD>Anti-symmetric approximation of square root with discontinuous factor so that the first derivative is finite and continuous</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.regSquare2" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.regSquare2"
>regSquare2</A>
</TD><TD>Anti-symmetric approximation of square with discontinuous factor so that the first derivative is non-zero and is continuous</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.regStep" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.regStep"
>regStep</A>
</TD><TD>Approximation of a general step, such that the characteristic is continuous and differentiable</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.evaluatePoly3_derivativeAtZero" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.evaluatePoly3_derivativeAtZero"
>evaluatePoly3_derivativeAtZero</A>
</TD><TD>Evaluate polynomial of order 3 that passes the origin with a predefined derivative</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.regFun3" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.regFun3"
>regFun3</A>
</TD><TD>Co-monotonic and C1 smooth regularization function</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.cubicHermite" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.cubicHermite"
>cubicHermite</A>
</TD><TD>Evaluate a cubic Hermite spline</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryS.png" ALT="Modelica.Fluid.Utilities.cubicHermite_withDerivative" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities.cubicHermite_withDerivative"
>cubicHermite_withDerivative</A>
</TD><TD>Evaluate a cubic Hermite spline, return value and derivative</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE checkBoundary<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.checkBoundary" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.checkBoundary"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.checkBoundary</H2>
<B>Check whether boundary definition is correct</B><p></P>
<P></P><H3>Information</H3>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>mediumName</TD><TD>&nbsp;</TD></TR>
<TR><TD>substanceNames[:]</TD><TD>Names of substances</TD></TR>
<TR><TD>singleState</TD><TD>&nbsp;</TD></TR>
<TR><TD>define_p</TD><TD>&nbsp;</TD></TR>
<TR><TD>X_boundary[:]</TD><TD>&nbsp;</TD></TR>
<TR><TD>modelName</TD><TD>&nbsp;</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE regRoot<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.regRoot" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.regRoot"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.regRoot</H2>
<B>Anti-symmetric square root approximation with finite derivative in the origin</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>
<p>
This function approximates sqrt(abs(x))*sgn(x), such that the derivative is finite and smooth in x=0.
</p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Function</th><th>Approximation</th><th>Range</th></tr>
<tr><td>y = regRoot(x)</td><td>y ~= sqrt(abs(x))*sgn(x)</td><td>abs(x) &gt;&gt;delta</td></tr>
<tr><td>y = regRoot(x)</td><td>y ~= x/sqrt(delta)</td><td>abs(x) &lt;&lt; delta</td></tr>
</table>
<p>
With the default value of delta=0.01, the difference between sqrt(x) and regRoot(x) is 16% around x=0.01, 0.25% around x=0.1 and 0.0025% around x=1.
</p>
<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>&nbsp;</TD></TR>
<TR><TD>delta</TD><TD>Range of significant deviation from sqrt(abs(x))*sgn(x)</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>&nbsp;</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE regRoot_der<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.regRoot_der" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.regRoot_der"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.regRoot_der</H2>
<B>Derivative of regRoot</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>
<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>&nbsp;</TD></TR>
<TR><TD>delta</TD><TD>Range of significant deviation from sqrt(x)</TD></TR>
<TR><TD>dx</TD><TD>Derivative of x</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>dy</TD><TD>&nbsp;</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE regSquare<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.regSquare" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.regSquare"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.regSquare</H2>
<B>Anti-symmetric square approximation with non-zero derivative in the origin</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>
<p>
This function approximates x^2*sgn(x), such that the derivative is non-zero in x=0.
</p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Function</th><th>Approximation</th><th>Range</th></tr>
<tr><td>y = regSquare(x)</td><td>y ~= x^2*sgn(x)</td><td>abs(x) &gt;&gt;delta</td></tr>
<tr><td>y = regSquare(x)</td><td>y ~= x*delta</td><td>abs(x) &lt;&lt; delta</td></tr>
</table>
<p>
With the default value of delta=0.01, the difference between x^2 and regSquare(x) is 41% around x=0.01, 0.4% around x=0.1 and 0.005% around x=1.
</p>
<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>&nbsp;</TD></TR>
<TR><TD>delta</TD><TD>Range of significant deviation from x^2*sgn(x)</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>&nbsp;</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE regPow<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.regPow" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.regPow"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.regPow</H2>
<B>Anti-symmetric power approximation with non-zero derivative in the origin</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>
<p>
This function approximates abs(x)^a*sign(x), such that the derivative is positive, finite and smooth in x=0.
</p>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th>Function</th><th>Approximation</th><th>Range</th></tr>
<tr><td>y = regPow(x)</td><td>y ~= abs(x)^a*sgn(x)</td><td>abs(x) &gt;&gt;delta</td></tr>
<tr><td>y = regPow(x)</td><td>y ~= x*delta^(a-1)</td><td>abs(x) &lt;&lt; delta</td></tr>
</table>
<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>&nbsp;</TD></TR>
<TR><TD>a</TD><TD>&nbsp;</TD></TR>
<TR><TD>delta</TD><TD>Range of significant deviation from x^a*sgn(x)</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>&nbsp;</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE regRoot2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.regRoot2" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.regRoot2"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.regRoot2</H2>
<B>Anti-symmetric approximation of square root with discontinuous factor so that the first derivative is finite and continuous</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>
<p>
Approximates the function
</p>
<pre>
   y = <b>if</b> x &ge; 0 <b>then</b> <b>sqrt</b>(k1*x) <b>else</b> -<b>sqrt</b>(k2*<b>abs</b>(x)), with k1, k2 &ge; 0
</pre>
<p>
in such a way that within the region -x_small &le; x &le; x_small,
the function is described by two polynomials of third order
(one in the region -x_small .. 0 and one within the region 0 .. x_small)
such that
</p>
<ul>
<li> The derivative at x=0 is finite. </li>
<li> The overall function is continuous with a
     continuous first derivative everywhere.</li>
<li> If parameter use_yd0 = <b>false</b>, the two polynomials
     are constructed such that the second derivatives at x=0
     are identical. If use_yd0 = <b>true</b>, the derivative
     at x=0 is explicitly provided via the additional argument
     yd0. If necessary, the derivative yd0 is automatically
     reduced in order that the polynomials are strict monotonically
     increasing <i>[Fritsch and Carlson, 1980]</i>.</li>
</ul>
<p>
Typical screenshots for two different configurations
are shown below. The first one with k1=k2=1:
</p>
<p>
<img src="../Resources/Images/Fluid/Components/regRoot2_a.png"
     alt="regRoot2_a.png">
</p>
<p>
and the second one with k1=1 and k2=3:
</p>
<p>
<img src="../Resources/Images/Fluid/Components/regRoot2_b.png"
      alt="regRoot2_b.png">
</p>

<p>
The (smooth) derivative of the function with
k1=1, k2=3 is shown in the next figure:
<p>
<img src="../Resources/Images/Fluid/Components/regRoot2_c.png"
     alt="regRoot2_c.png">
</p>

<p>
<b>Literature</b>
</p>

<dl>
<dt> Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd> <b>Monotone piecewise cubic interpolation</b>.
     SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</dd>
</dl>
<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>abscissa value</TD></TR>
<TR><TD>x_small</TD><TD>approximation of function for |x| &lt;= x_small</TD></TR>
<TR><TD>k1</TD><TD>y = if x&gt;=0 then sqrt(k1*x) else -sqrt(k2*|x|)</TD></TR>
<TR><TD>k2</TD><TD>y = if x&gt;=0 then sqrt(k1*x) else -sqrt(k2*|x|)</TD></TR>
<TR><TD>use_yd0</TD><TD>= true, if yd0 shall be used</TD></TR>
<TR><TD>yd0</TD><TD>Desired derivative at x=0: dy/dx = yd0</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>ordinate value</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE regSquare2<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.regSquare2" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.regSquare2"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.regSquare2</H2>
<B>Anti-symmetric approximation of square with discontinuous factor so that the first derivative is non-zero and is continuous</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>
<p>
Approximates the function
</p>
<pre>
   y = <b>if</b> x &ge; 0 <b>then</b> k1*x*x <b>else</b> -k2*x*x, with k1, k2 > 0
</pre>
<p>
in such a way that within the region -x_small &le; x &le; x_small,
the function is described by two polynomials of third order
(one in the region -x_small .. 0 and one within the region 0 .. x_small)
such that
</p>

<ul>
<li> The derivative at x=0 is non-zero (in order that the
     inverse of the function does not have an infinite derivative). </li>
<li> The overall function is continuous with a
     continuous first derivative everywhere.</li>
<li> If parameter use_yd0 = <b>false</b>, the two polynomials
     are constructed such that the second derivatives at x=0
     are identical. If use_yd0 = <b>true</b>, the derivative
     at x=0 is explicitly provided via the additional argument
     yd0. If necessary, the derivative yd0 is automatically
     reduced in order that the polynomials are strict monotonically
     increasing <i>[Fritsch and Carlson, 1980]</i>.</li>
</ul>

<p>
A typical screenshot for k1=1, k2=3 is shown in the next figure:
</p>
<p>
<img src="../Resources/Images/Fluid/Components/regSquare2_b.png"
     alt="regSquare2_b.png">
</p>

<p>
The (smooth, non-zero) derivative of the function with
k1=1, k2=3 is shown in the next figure:
</p>

<p>
<img src="../Resources/Images/Fluid/Components/regSquare2_c.png"
     alt="regSquare2_b.png">
</p>

<p>
<b>Literature</b>
</p>

<dl>
<dt> Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd> <b>Monotone piecewise cubic interpolation</b>.
     SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</dd>
</dl>
<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>abscissa value</TD></TR>
<TR><TD>x_small</TD><TD>approximation of function for |x| &lt;= x_small</TD></TR>
<TR><TD>k1</TD><TD>y = (if x&gt;=0 then k1 else k2)*x*|x|</TD></TR>
<TR><TD>k2</TD><TD>y = (if x&gt;=0 then k1 else k2)*x*|x|</TD></TR>
<TR><TD>use_yd0</TD><TD>= true, if yd0 shall be used</TD></TR>
<TR><TD>yd0</TD><TD>Desired derivative at x=0: dy/dx = yd0</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>ordinate value</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE regStep<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.regStep" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.regStep"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.regStep</H2>
<B>Approximation of a general step, such that the characteristic is continuous and differentiable</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>
<p>
This function is used to approximate the equation
</p>
<pre>
    y = <b>if</b> x &gt; 0 <b>then</b> y1 <b>else</b> y2;
</pre>

<p>
by a smooth characteristic, so that the expression is continuous and differentiable:
</p>

<pre>
   y = <b>smooth</b>(1, <b>if</b> x &gt;  x_small <b>then</b> y1 <b>else</b>
                 <b>if</b> x &lt; -x_small <b>then</b> y2 <b>else</b> f(y1, y2));
</pre>

<p>
In the region -x_small &lt; x &lt; x_small a 2nd order polynomial is used
for a smooth transition from y1 to y2.
</p>
<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>Abscissa value</TD></TR>
<TR><TD>y1</TD><TD>Ordinate value for x &gt; 0</TD></TR>
<TR><TD>y2</TD><TD>Ordinate value for x &lt; 0</TD></TR>
<TR><TD>x_small</TD><TD>Approximation of step for -x_small &lt;= x &lt;= x_small; x_small &gt;= 0 required</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>Ordinate value to approximate y = if x &gt; 0 then y1 else y2</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE evaluatePoly3_derivativeAtZero<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.evaluatePoly3_derivativeAtZero" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.evaluatePoly3_derivativeAtZero"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.evaluatePoly3_derivativeAtZero</H2>
<B>Evaluate polynomial of order 3 that passes the origin with a predefined derivative</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>

<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>Value for which polynomial shall be evaluated</TD></TR>
<TR><TD>x1</TD><TD>Abscissa value</TD></TR>
<TR><TD>y1</TD><TD>y1=f(x1)</TD></TR>
<TR><TD>y1d</TD><TD>First derivative at y1</TD></TR>
<TR><TD>y0d</TD><TD>First derivative at f(x=0)</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>&nbsp;</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE regFun3<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.regFun3" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.regFun3"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.regFun3</H2>
<B>Co-monotonic and C1 smooth regularization function</B><p></P>
<P></P><H3>Information</H3>
<PRE></pre>
<p>
Approximates a function in a region between <code>x0</code> and <code>x1</code>
such that
</p>
<ul>
<li> The overall function is continuous with a
     continuous first derivative everywhere.</li>
<li> The function is co-monotone with the given
     data points.</li>
</ul>
<p>
In this region, a continuation is constructed from the given points
<code>(x0, y0)</code>, <code>(x1, y1)</code> and the respective
derivatives. For this purpose, a single polynomial of third order or two
cubic polynomials with a linear section in between are used <i>[Gasparo
and Morandi, 1991]</i>. This algorithm was extended with two additional
conditions to avoid saddle points with zero/infinite derivative that lead to
integrator step size reduction to zero.
</p>
<p>
This function was developed for pressure loss correlations properly
addressing the static head on top of the established requirements
for monotonicity and smoothness. In this case, the present function
allows to implement the exact solution in the limit of
<code>x1-x0 -> 0</code> or <code>y1-y0 -> 0</code>.
</p>
<p>
Typical screenshots for two different configurations
are shown below. The first one illustrates five different settings of <code>xi</code> and <code>yid</code>:
</p>
<p>
<img src="../Resources/Images/Fluid/Components/regFun3_a.png"
      alt="regFun3_a.png">
</p>
<p>
The second graph shows the continuous derivative of this regularization function:
</p>
<p>
<img src="../Resources/Images/Fluid/Components/regFun3_b.png"
     alt="regFun3_a.png">
</p>

<p>
<b>Literature</b>
</p>

<dl>
<dt> Gasparo M. G. and Morandi R. (1991):</dt>
<dd> <b>Piecewise cubic monotone interpolation with assigned slopes</b>.
     Computing, Vol. 46, Issue 4, December 1991, pp. 355 - 365.</dd>
</dl>
<pre></PRE><P></P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>Abscissa value</TD></TR>
<TR><TD>x0</TD><TD>Lower abscissa value</TD></TR>
<TR><TD>x1</TD><TD>Upper abscissa value</TD></TR>
<TR><TD>y0</TD><TD>Ordinate value at lower abscissa value</TD></TR>
<TR><TD>y1</TD><TD>Ordinate value at upper abscissa value</TD></TR>
<TR><TD>y0d</TD><TD>Derivative at lower abscissa value</TD></TR>
<TR><TD>y1d</TD><TD>Derivative at upper abscissa value</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>Ordinate value</TD></TR>
<TR><TD>c</TD><TD>Slope of linear section between two cubic polynomials or dummy linear section slope if single cubic is used</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE cubicHermite<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.cubicHermite" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.cubicHermite"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.cubicHermite</H2>
<B>Evaluate a cubic Hermite spline</B><p></P>
<P></P><H3>Information</H3>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>Abscissa value</TD></TR>
<TR><TD>x1</TD><TD>Lower abscissa value</TD></TR>
<TR><TD>x2</TD><TD>Upper abscissa value</TD></TR>
<TR><TD>y1</TD><TD>Lower ordinate value</TD></TR>
<TR><TD>y2</TD><TD>Upper ordinate value</TD></TR>
<TR><TD>y1d</TD><TD>Lower gradient</TD></TR>
<TR><TD>y2d</TD><TD>Upper gradient</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>Interpolated ordinate value</TD></TR>
</TABLE>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE cubicHermite_withDerivative<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Utilities.checkBoundaryI.png" ALT="Modelica.Fluid.Utilities.cubicHermite_withDerivative" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Utilities.cubicHermite_withDerivative"></A><A HREF="Modelica_Fluid_Utilities.html#Modelica.Fluid.Utilities"
>Modelica.Fluid.Utilities</A>.cubicHermite_withDerivative</H2>
<B>Evaluate a cubic Hermite spline, return value and derivative</B><p></P>
<P></P><H3>Information</H3>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for functions).
<P><H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>x</TD><TD>Abscissa value</TD></TR>
<TR><TD>x1</TD><TD>Lower abscissa value</TD></TR>
<TR><TD>x2</TD><TD>Upper abscissa value</TD></TR>
<TR><TD>y1</TD><TD>Lower ordinate value</TD></TR>
<TR><TD>y2</TD><TD>Upper ordinate value</TD></TR>
<TR><TD>y1d</TD><TD>Lower gradient</TD></TR>
<TR><TD>y2d</TD><TD>Upper gradient</TD></TR>
</TABLE>
<P><H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>y</TD><TD>Interpolated ordinate value</TD></TR>
<TR><TD>dy_dx</TD><TD>Derivative dy/dx at abscissa value x</TD></TR>
</TABLE>
<address><a href="http://www.3ds.com/">Automatically generated</a> Mon Sep 23 17:20:53 2013.
</address></BODY>
</HTML>
